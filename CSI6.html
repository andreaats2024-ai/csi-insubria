<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üè• Cartella Sociale Informatizzata (CSI) - ATS Insubria</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px 20px;
            text-align: center;
        }

        header h1 {
            font-size: 28px;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        header p {
            font-size: 14px;
            opacity: 0.9;
        }

        .nav-tabs {
            display: flex;
            flex-wrap: wrap;
            background: #f8f9fa;
            border-bottom: 2px solid #ddd;
            overflow-x: auto;
        }

        .nav-tabs button {
            flex: 1;
            min-width: 120px;
            padding: 15px 10px;
            border: none;
            background: transparent;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            color: #666;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
        }

        .nav-tabs button:hover {
            background: #f0f0f0;
            color: #667eea;
        }

        .nav-tabs button.active {
            background: white;
            color: #667eea;
            border-bottom-color: #667eea;
        }

        .content {
            padding: 30px;
            min-height: 400px;
        }

        .tab-pane {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .tab-pane.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .section-title {
            font-size: 18px;
            font-weight: 700;
            color: #667eea;
            margin-top: 20px;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #667eea;
        }

        .section-title:first-child {
            margin-top: 0;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-row.full {
            grid-template-columns: 1fr;
        }

        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
        }

        label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
            font-size: 14px;
        }

        label.required::after {
            content: " *";
            color: #e74c3c;
        }

        input[type="text"],
        input[type="email"],
        input[type="tel"],
        input[type="date"],
        input[type="number"],
        select,
        textarea {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            transition: border-color 0.3s ease;
            font-family: inherit;
        }

        input[type="text"]:focus,
        input[type="email"]:focus,
        input[type="tel"]:focus,
        input[type="date"]:focus,
        input[type="number"]:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        textarea {
            resize: vertical;
            min-height: 80px;
        }

        .checkbox-group,
        .radio-group {
            display: grid;
            gap: 12px;
            margin-top: 10px;
        }

        .checkbox-item,
        .radio-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        input[type="checkbox"],
        input[type="radio"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .checkbox-item label,
        .radio-item label {
            margin-bottom: 0;
            cursor: pointer;
            font-weight: 500;
        }

        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 25px;
            flex-wrap: wrap;
        }

        button {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #95a5a6;
            color: white;
        }

        .btn-secondary:hover {
            background: #7f8c8d;
        }

        .btn-danger {
            background: #e74c3c;
            color: white;
        }

        .btn-danger:hover {
            background: #c0392b;
        }

        .btn-success {
            background: #27ae60;
            color: white;
        }

        .btn-success:hover {
            background: #229954;
        }

        .alert {
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
            font-size: 14px;
        }

        .alert-warning {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            color: #856404;
        }

        .alert-success {
            background: #d4edda;
            border-left: 4px solid #28a745;
            color: #155724;
        }

        .alert-error {
            background: #f8d7da;
            border-left: 4px solid #dc3545;
            color: #721c24;
        }

        .sub-section {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
        }

        .sub-section-title {
            font-weight: 700;
            color: #333;
            margin-bottom: 12px;
            font-size: 14px;
        }

        footer {
            background: #f8f9fa;
            padding: 20px;
            text-align: center;
            border-top: 1px solid #ddd;
            font-size: 13px;
            color: #666;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .footer-links a {
            color: #667eea;
            text-decoration: none;
            font-weight: 600;
        }

        .footer-links a:hover {
            text-decoration: underline;
        }

        .sync-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            background: #27ae60;
            border-radius: 50%;
            margin-right: 5px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.5;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üè• Cartella Sociale Informatizzata (CSI)</h1>
            <p>ATS Insubria - ASST e Ambiti di Competenza</p>
        </header>

        <div class="nav-tabs" role="tablist">
            <button class="nav-tab active" data-tab="anagrafica" role="tab">1. Anagrafica</button>
            <button class="nav-tab" data-tab="interventi" role="tab">2. Interventi</button>
            <button class="nav-tab" data-tab="autosufficienza" role="tab">3. Autosufficienza</button>
            <button class="nav-tab" data-tab="abitativa" role="tab">4. Socio-Abitativa</button>
            <button class="nav-tab" data-tab="economica" role="tab">5. Socio-Economica</button>
            <button class="nav-tab" data-tab="familiare" role="tab">6. Socio-Familiare</button>
            <button class="nav-tab" data-tab="giuridica" role="tab">7. Giuridica</button>
        </div>

        <div class="content">
            <!-- TAB 1: ANAGRAFICA -->
            <div id="anagrafica" class="tab-pane active" role="tabpanel">
                <div class="alert alert-warning">‚ö†Ô∏è Campo obbligatorio per salvare</div>

                <div class="section-title">DATI ANAGRAFICI DEL PAZIENTE</div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="nome" class="required">Nome e Cognome</label>
                        <input type="text" id="nome" class="required-field" placeholder="Es: Mario Rossi">
                    </div>
                    <div class="form-group">
                        <label for="luogo-nascita" class="required">Luogo di nascita</label>
                        <input type="text" id="luogo-nascita" class="required-field" placeholder="Es: Milano">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="data-nascita" class="required">Data di nascita</label>
                        <input type="date" id="data-nascita" class="required-field">
                    </div>
                    <div class="form-group">
                        <label for="stato-civile" class="required">Stato civile</label>
                        <select id="stato-civile" class="required-field">
                            <option value="">-- Selezionare --</option>
                            <option value="celibe">Celibe/Nubile</option>
                            <option value="coniugato">Coniugato/a</option>
                            <option value="convivente">Convivente</option>
                            <option value="vedovo">Vedovo/a</option>
                            <option value="separato">Separato/a</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="cittadinanza" class="required">Cittadinanza</label>
                        <input type="text" id="cittadinanza" class="required-field" placeholder="Es: Italiana">
                    </div>
                    <div class="form-group">
                        <label for="codice-fiscale" class="required">Codice Fiscale</label>
                        <input type="text" id="codice-fiscale" class="required-field" placeholder="Es: RSSMRA80A01H501X">
                    </div>
                </div>

                <div class="sub-section">
                    <div class="sub-section-title">Contatti e Residenza</div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="indirizzo-residenza">Indirizzo di residenza</label>
                            <input type="text" id="indirizzo-residenza" placeholder="Via, numero, citt√†">
                        </div>
                        <div class="form-group">
                            <label for="indirizzo-domicilio">Indirizzo di domicilio</label>
                            <input type="text" id="indirizzo-domicilio" placeholder="Se diverso da residenza">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="telefono">Telefono</label>
                            <input type="tel" id="telefono" placeholder="Es: 02 xxxx xxxx">
                        </div>
                        <div class="form-group">
                            <label for="email">Email</label>
                            <input type="email" id="email" placeholder="Es: mario.rossi@email.com">
                        </div>
                    </div>
                </div>

                <div class="sub-section">
                    <div class="sub-section-title">Iscrizione SSN e Documentazione</div>
                    <div class="form-row full">
                        <div class="form-group">
                            <label>Stato iscrizione SSN</label>
                            <div class="checkbox-group">
                                <div class="checkbox-item">
                                    <input type="radio" id="ssn-si" name="iscritto-ssn" value="si">
                                    <label for="ssn-si">Iscritto SSN</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="radio" id="stp" name="iscritto-ssn" value="stp">
                                    <label for="stp">STP (Straniero Temporaneamente Presente)</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="tessera-sanitaria">Tessera Sanitaria</label>
                            <input type="text" id="tessera-sanitaria" placeholder="Numero tessera">
                        </div>
                        <div class="form-group">
                            <label for="permesso-soggiorno">Permesso di soggiorno</label>
                            <select id="permesso-soggiorno">
                                <option value="">-- Selezionare --</option>
                                <option value="in-corso">Si - in corso</option>
                                <option value="scaduto">Si - scaduto</option>
                                <option value="no">No</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="sub-section">
                    <div class="sub-section-title">Medico di Medicina Generale</div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="nome-mmg">Nome e Cognome MMG</label>
                            <input type="text" id="nome-mmg" placeholder="Nome del medico">
                        </div>
                        <div class="form-group">
                            <label for="telefono-mmg">Telefono MMG</label>
                            <input type="tel" id="telefono-mmg">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="email-mmg">Email MMG</label>
                            <input type="email" id="email-mmg">
                        </div>
                    </div>
                </div>

                <div class="sub-section">
                    <div class="sub-section-title">Caregiver Principale</div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="tipo-caregiver">Tipologia caregiver</label>
                            <select id="tipo-caregiver">
                                <option value="">-- Selezionare --</option>
                                <option value="familiare">Familiare</option>
                                <option value="convivente">Convivente</option>
                                <option value="non-familiare">Non familiare</option>
                                <option value="volontariato">Vicino di casa / Volontariato</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="nome-caregiver">Nome e Cognome caregiver</label>
                            <input type="text" id="nome-caregiver" placeholder="Nome del caregiver">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="telefono-caregiver">Telefono caregiver</label>
                            <input type="tel" id="telefono-caregiver">
                        </div>
                        <div class="form-group">
                            <label for="email-caregiver">Email caregiver</label>
                            <input type="email" id="email-caregiver">
                        </div>
                    </div>
                </div>

                <div class="button-group">
                    <button class="btn-secondary" onclick="pulisciSezione('anagrafica')">Pulisci</button>
                    <button class="btn-primary" onclick="salvaSezione('anagrafica')">Salva Sezione</button>
                </div>
            </div>

            <!-- TAB 2: INTERVENTI -->
            <div id="interventi" class="tab-pane" role="tabpanel">
                <div class="section-title">INTERVENTI ATTIVI</div>
                <p style="margin-bottom: 20px; font-size: 14px; color: #666;">Indicare gli interventi sanitari, socio-sanitari e sociali attualmente attivi e in carico.</p>

                <div class="sub-section">
                    <div class="sub-section-title">Interventi Sanitari</div>
                    <div class="form-group">
                        <label>Interventi sanitari in atto</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" id="int-sanitari-si" name="int-sanitari">
                                <label for="int-sanitari-si">Presenti</label>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="spec-sanitari">Specificare</label>
                        <textarea id="spec-sanitari" placeholder="Descrizione interventi sanitari"></textarea>
                    </div>
                </div>

                <div class="sub-section">
                    <div class="sub-section-title">Assistenza Domiciliare Integrata (ADI)</div>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="adi-infermieristica" name="adi">
                            <label for="adi-infermieristica">ADI - Infermieristica</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="adi-riabilitazione" name="adi">
                            <label for="adi-riabilitazione">ADI - Riabilitazione</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="adi-fisioterapia" name="adi">
                            <label for="adi-fisioterapia">ADI - Fisioterapia</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="adi-altro" name="adi">
                            <label for="adi-altro">ADI - Altro</label>
                        </div>
                    </div>
                </div>

                <div class="sub-section">
                    <div class="sub-section-title">Servizi Sociali</div>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="pasti-domicilio" name="servizi-sociali">
                            <label for="pasti-domicilio">Pasti a domicilio</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="servizio-sociale" name="servizi-sociali">
                            <label for="servizio-sociale">Servizio Sociale</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="trasporto-sociale" name="servizi-sociali">
                            <label for="trasporto-sociale">Trasporto sociale</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="telesoccorso" name="servizi-sociali">
                            <label for="telesoccorso">Telesoccorso</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="sostegno-abitativo" name="servizi-sociali">
                            <label for="sostegno-abitativo">Sostegno abitativo</label>
                        </div>
                    </div>
                </div>

                <div class="sub-section">
                    <div class="sub-section-title">Cure Palliative e Intermedie</div>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="cure-palliative" name="cure-palliative">
                            <label for="cure-palliative">Cure Palliative</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="cure-intermedie" name="cure-intermedie">
                            <label for="cure-intermedie">Cure Intermedie</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="rsa-aperta" name="rsa">
                            <label for="rsa-aperta">RSA Aperta</label>
                        </div>
                    </div>
                </div>

                <div class="button-group">
                    <button class="btn-secondary" onclick="pulisciSezione('interventi')">Pulisci</button>
                    <button class="btn-primary" onclick="salvaSezione('interventi')">Salva Sezione</button>
                </div>
            </div>

            <!-- TAB 3: AUTOSUFFICIENZA -->
            <div id="autosufficienza" class="tab-pane" role="tabpanel">
                <div class="section-title">INDICATORI DI AUTOSUFFICIENZA</div>

                <div class="sub-section">
                    <div class="sub-section-title">Indici Funzionali</div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="adl-punteggio">Indici funzionali - ADL (punteggio)</label>
                            <input type="number" id="adl-punteggio" min="0" max="30" placeholder="0-30">
                        </div>
                        <div class="form-group">
                            <label for="iadl-punteggio">Indici funzionali - IADL (punteggio)</label>
                            <input type="number" id="iadl-punteggio" min="0" max="8" placeholder="0-8">
                        </div>
                    </div>
                </div>

                <div class="sub-section">
                    <div class="sub-section-title">Indici Cognitivi</div>
                    <div class="form-group">
                        <label>Livello compromissione cognitiva</label>
                        <div class="radio-group">
                            <div class="radio-item">
                                <input type="radio" id="cognitivo-lieve" name="indici-cognitivi" value="lieve">
                                <label for="cognitivo-lieve">Lieve</label>
                            </div>
                            <div class="radio-item">
                                <input type="radio" id="cognitivo-moderato" name="indici-cognitivi" value="moderato">
                                <label for="cognitivo-moderato">Moderato</label>
                            </div>
                            <div class="radio-item">
                                <input type="radio" id="cognitivo-grave" name="indici-cognitivi" value="grave">
                                <label for="cognitivo-grave">Grave compromissione</label>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="sub-section">
                    <div class="sub-section-title">Compliance e Comportamenti</div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="compliance">Livello di compliance</label>
                            <select id="compliance">
                                <option value="">-- Selezionare --</option>
                                <option value="lieve">Lieve</option>
                                <option value="moderato">Moderato</option>
                                <option value="grave">Grave</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="disturbi-comportamentali">Disturbi comportamentali</label>
                            <select id="disturbi-comportamentali">
                                <option value="">-- Selezionare --</option>
                                <option value="no">No</option>
                                <option value="compenso">Si - in compenso</option>
                                <option value="scompenso">Si - in scompenso</option>
                            </select>
                        </div>
                    </div>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="wandering" name="comportamenti">
                            <label for="wandering">Wandering (disorientamento)</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="aggressivita" name="comportamenti">
                            <label for="aggressivita">Aggressivit√† fisica</label>
                        </div>
                    </div>
                </div>

                <div class="sub-section">
                    <div class="sub-section-title">Autonomia Terapeutica e Consapevolezza</div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Autonomia nell'assunzione della terapia</label>
                            <div class="radio-group">
                                <div class="radio-item">
                                    <input type="radio" id="autonomia-si" name="autonomia-terapia" value="si">
                                    <label for="autonomia-si">Si</label>
                                </div>
                                <div class="radio-item">
                                    <input type="radio" id="autonomia-no" name="autonomia-terapia" value="no">
                                    <label for="autonomia-no">No</label>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="chi-assicura">Se no - Chi assicura l'assunzione</label>
                            <input type="text" id="chi-assicura" placeholder="Nome della persona">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="consapevolezza">Consapevolezza paziente della propria condizione</label>
                        <select id="consapevolezza">
                            <option value="">-- Selezionare --</option>
                            <option value="consapevole">Consapevole</option>
                            <option value="alternante">Alternante (momenti di consapevolezza e poca consapevolezza)</option>
                            <option value="scarso">Scarso</option>
                            <option value="proattivo">Proattivo</option>
                        </select>
                    </div>
                </div>

                <div class="button-group">
                    <button class="btn-secondary" onclick="pulisciSezione('autosufficienza')">Pulisci</button>
                    <button class="btn-primary" onclick="salvaSezione('autosufficienza')">Salva Sezione</button>
                </div>
            </div>

            <!-- TAB 4: SOCIO-ABITATIVA -->
            <div id="abitativa" class="tab-pane" role="tabpanel">
                <div class="section-title">CONDIZIONE SOCIO-ABITATIVA</div>

                <div class="sub-section">
                    <div class="sub-section-title">Alloggio</div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="tipo-alloggio">Tipo di alloggio</label>
                            <select id="tipo-alloggio">
                                <option value="">-- Selezionare --</option>
                                <option value="propriet√†">Di propriet√†</option>
                                <option value="affitto">In affitto / Comodato</option>
                                <option value="pubblico">Alloggio pubblico</option>
                                <option value="altro">Altro</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="zona">Zona</label>
                            <select id="zona">
                                <option value="">-- Selezionare --</option>
                                <option value="urbana">Urbana</option>
                                <option value="sub-urbana">Sub-urbana</option>
                                <option value="rurale">Rurale</option>
                                <option value="montana">Montana</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="sub-section">
                    <div class="sub-section-title">Fruibilit√† Ambiente di Vita</div>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="unico-livello" name="fruibilita">
                            <label for="unico-livello">Abitazione su unico livello</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="piu-livelli" name="fruibilita">
                            <label for="piu-livelli">Abitazione su pi√π livelli</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="ascensore" name="fruibilita">
                            <label for="ascensore">Ascensore</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="scale-ingresso" name="fruibilita">
                            <label for="scale-ingresso">Scale all'ingresso</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="camera-dedicata" name="fruibilita">
                            <label for="camera-dedicata">Camera dedicata all'assistito</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="letto-articolato" name="fruibilita">
                            <label for="letto-articolato">Letto articolato</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="sollevatore" name="fruibilita">
                            <label for="sollevatore">Sollevatore</label>
                        </div>
                    </div>
                </div>

                <div class="sub-section">
                    <div class="sub-section-title">Servizi Igienici</div>
                    <div class="form-group">
                        <label>Agibilit√† servizi igienici</label>
                        <div class="radio-group">
                            <div class="radio-item">
                                <input type="radio" id="igienici-agibili" name="servizi-igienici" value="agibili">
                                <label for="igienici-agibili">Agibili / Accessibili</label>
                            </div>
                            <div class="radio-item">
                                <input type="radio" id="igienici-non-agibili" name="servizi-igienici" value="non-agibili">
                                <label for="igienici-non-agibili">Non agibili / Accessibili</label>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="spec-igienici">Specificare se inadeguati</label>
                        <textarea id="spec-igienici" placeholder="Descrizione delle criticit√†"></textarea>
                    </div>
                </div>

                <div class="sub-section">
                    <div class="sub-section-title">Condizioni Igieniche</div>
                    <div class="form-group">
                        <label>Livello condizioni igieniche</label>
                        <div class="radio-group">
                            <div class="radio-item">
                                <input type="radio" id="igiene-buone" name="condizioni-igieniche" value="buone">
                                <label for="igiene-buone">Buone</label>
                            </div>
                            <div class="radio-item">
                                <input type="radio" id="igiene-discrete" name="condizioni-igieniche" value="discrete">
                                <label for="igiene-discrete">Discrete</label>
                            </div>
                            <div class="radio-item">
                                <input type="radio" id="igiene-scarse" name="condizioni-igieniche" value="scarse">
                                <label for="igiene-scarse">Scarse</label>
                            </div>
                            <div class="radio-item">
                                <input type="radio" id="igiene-pessime" name="condizioni-igieniche" value="pessime">
                                <label for="igiene-pessime">Pessime</label>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="sub-section">
                    <div class="sub-section-title">Barriere Architettoniche e Rischi</div>
                    <div class="form-group">
                        <label>Presenza di barriere architettoniche</label>
                        <div class="radio-group">
                            <div class="radio-item">
                                <input type="radio" id="barriere-si" name="barriere" value="si">
                                <label for="barriere-si">Si</label>
                            </div>
                            <div class="radio-item">
                                <input type="radio" id="barriere-no" name="barriere" value="no">
                                <label for="barriere-no">No</label>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="spec-barriere">Specificare tipologia barriera/rischio</label>
                        <textarea id="spec-barriere" placeholder="Descrizione delle barriere"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="data-barriere">Data pratica superamento barriere</label>
                        <input type="date" id="data-barriere">
                    </div>
                </div>

                <div class="button-group">
                    <button class="btn-secondary" onclick="pulisciSezione('abitativa')">Pulisci</button>
                    <button class="btn-primary" onclick="salvaSezione('abitativa')">Salva Sezione</button>
                </div>
            </div>

            <!-- TAB 5: SOCIO-ECONOMICA -->
            <div id="economica" class="tab-pane" role="tabpanel">
                <div class="section-title">CONDIZIONE SOCIO-ECONOMICA</div>

                <div class="sub-section">
                    <div class="sub-section-title">ISEE</div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Attestazione ISEE in corso di validit√†</label>
                            <div class="radio-group">
                                <div class="radio-item">
                                    <input type="radio" id="isee-si" name="attestazione-isee" value="si">
                                    <label for="isee-si">Si</label>
                                </div>
                                <div class="radio-item">
                                    <input type="radio" id="isee-no" name="attestazione-isee" value="no">
                                    <label for="isee-no">No</label>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="valore-isee">Valore ISEE</label>
                            <input type="number" id="valore-isee" placeholder="Valore numerico">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="tipologia-isee">Tipologia ISEE</label>
                        <select id="tipologia-isee">
                            <option value="">-- Selezionare --</option>
                            <option value="ordinario">Ordinario</option>
                            <option value="socio-sanitario">Socio-sanitario</option>
                            <option value="minorenni">Minorenni</option>
                        </select>
                    </div>
                </div>

                <div class="sub-section">
                    <div class="sub-section-title">Fonti di Reddito</div>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="reddito-lavoro" name="fonti-reddito">
                            <label for="reddito-lavoro">Reddito da lavoro</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="pensione" name="fonti-reddito">
                            <label for="pensione">Pensione / Indennit√†</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="altro-reddito" name="fonti-reddito">
                            <label for="altro-reddito">Altro</label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="spec-reddito">Specificare altre fonti</label>
                        <textarea id="spec-reddito" placeholder="Descrizione altre fonti di reddito"></textarea>
                    </div>
                </div>

                <div class="sub-section">
                    <div class="sub-section-title">Situazione Economica</div>
                    <div class="form-group">
                        <label>Condizione economica</label>
                        <div class="radio-group">
                            <div class="radio-item">
                                <input type="radio" id="econ-autonomo" name="situazione-economica" value="autonomo">
                                <label for="econ-autonomo">Autonomo e in equilibrio finanziario</label>
                            </div>
                            <div class="radio-item">
                                <input type="radio" id="econ-aiuto" name="situazione-economica" value="aiuto">
                                <label for="econ-aiuto">Riceve aiuto da parenti e/o altre persone</label>
                            </div>
                            <div class="radio-item">
                                <input type="radio" id="econ-bisogno" name="situazione-economica" value="bisogno">
                                <label for="econ-bisogno">In condizione di bisogno economico senza aiuti</label>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="spec-economica">Specificare criticit√† economiche</label>
                        <textarea id="spec-economica" placeholder="Descrizione della situazione economica"></textarea>
                    </div>
                </div>

                <div class="button-group">
                    <button class="btn-secondary" onclick="pulisciSezione('economica')">Pulisci</button>
                    <button class="btn-primary" onclick="salvaSezione('economica')">Salva Sezione</button>
                </div>
            </div>

            <!-- TAB 6: SOCIO-FAMILIARE -->
            <div id="familiare" class="tab-pane" role="tabpanel">
                <div class="section-title">CONDIZIONE SOCIO-FAMILIARE</div>

                <div class="sub-section">
                    <div class="sub-section-title">Composizione Nucleo Familiare</div>
                    <div class="form-group">
                        <label>Composizione del nucleo</label>
                        <div class="radio-group">
                            <div class="radio-item">
                                <input type="radio" id="nucleo-solo" name="composizione-nucleo" value="solo">
                                <label for="nucleo-solo">Da solo/a</label>
                            </div>
                            <div class="radio-item">
                                <input type="radio" id="nucleo-coniuge" name="composizione-nucleo" value="coniuge">
                                <label for="nucleo-coniuge">In nucleo con coniuge/convivente</label>
                            </div>
                            <div class="radio-item">
                                <input type="radio" id="nucleo-familiari" name="composizione-nucleo" value="familiari">
                                <label for="nucleo-familiari">In nucleo con propri familiari o parenti</label>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="sub-section">
                    <div class="sub-section-title">Soggetti Fragili nel Nucleo</div>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="fragili-presenti" name="fragili">
                            <label for="fragili-presenti">Presenza di altri soggetti fragili (anziani non autosufficienti, disabili)</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="minori-presenti" name="minori">
                            <label for="minori-presenti">Presenza di minori</label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="percorsi-minori">Se minori: percorsi attivi a tutela</label>
                        <textarea id="percorsi-minori" placeholder="Descrizione dei percorsi attivi"></textarea>
                    </div>
                </div>

                <div class="sub-section">
                    <div class="sub-section-title">Genitorialit√† e Responsabilit√†</div>
                    <div class="form-group">
                        <label>Decadimento responsabilit√† genitoriale</label>
                        <div class="radio-group">
                            <div class="radio-item">
                                <input type="radio" id="genitoriale-no" name="responsabilita-genitoriale" value="no">
                                <label for="genitoriale-no">No</label>
                            </div>
                            <div class="radio-item">
                                <input type="radio" id="genitoriale-si" name="responsabilita-genitoriale" value="si">
                                <label for="genitoriale-si">Si</label>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="spec-genitoriale">Se si - Specificare</label>
                        <textarea id="spec-genitoriale" placeholder="Descrizione del decadimento"></textarea>
                    </div>
                </div>

                <div class="sub-section">
                    <div class="sub-section-title">Stato del Caregiver</div>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="caregiver-presente" name="stato-caregiver">
                            <label for="caregiver-presente">Presente e attivo nell'assistenza</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="caregiver-fatica" name="stato-caregiver">
                            <label for="caregiver-fatica">Fatica rispetto all'assistenza</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="caregiver-non-attivo" name="stato-caregiver">
                            <label for="caregiver-non-attivo">Non attivo</label>
                        </div>
                    </div>
                </div>

                <div class="sub-section">
                    <div class="sub-section-title">Caregiver Competenti Professionalmente</div>
                    <div class="form-group">
                        <label>Disponibilit√† caregiver professionali</label>
                        <div class="radio-group">
                            <div class="radio-item">
                                <input type="radio" id="prof-totalmente" name="caregiver-professionali" value="totalmente">
                                <label for="prof-totalmente">Attivabili totalmente</label>
                            </div>
                            <div class="radio-item">
                                <input type="radio" id="prof-parzialmente" name="caregiver-professionali" value="parzialmente">
                                <label for="prof-parzialmente">Attivabili parzialmente</label>
                            </div>
                            <div class="radio-item">
                                <input type="radio" id="prof-non" name="caregiver-professionali" value="non">
                                <label for="prof-non">Non attivabili</label>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="sub-section">
                    <div class="sub-section-title">Conflittualit√† e Situazione Coniugale</div>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="conflittualita-presente" name="conflittualita">
                            <label for="conflittualita-presente">Conflittualit√† familiare presente</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="percorsi-conflitto" name="conflittualita">
                            <label for="percorsi-conflitto">Percorsi ATTIVI per supporto relazioni familiari</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="separazione" name="situazione-coniugale">
                            <label for="separazione">Separazione coniugale / Interruzione convivenza</label>
                        </div>
                    </div>
                </div>

                <div class="button-group">
                    <button class="btn-secondary" onclick="pulisciSezione('familiare')">Pulisci</button>
                    <button class="btn-primary" onclick="salvaSezione('familiare')">Salva Sezione</button>
                </div>
            </div>

            <!-- TAB 7: PROTEZIONE GIURIDICA -->
            <div id="giuridica" class="tab-pane" role="tabpanel">
                <div class="section-title">PROTEZIONE GIURIDICA</div>

                <div class="sub-section">
                    <div class="sub-section-title">Amministratore di Sostegno</div>
                    <div class="form-group">
                        <label>Amministratore di Sostegno presente</label>
                        <div class="radio-group">
                            <div class="radio-item">
                                <input type="radio" id="adis-si" name="amministratore-sostegno" value="si">
                                <label for="adis-si">Si</label>
                            </div>
                            <div class="radio-item">
                                <input type="radio" id="adis-no" name="amministratore-sostegno" value="no">
                                <label for="adis-no">No</label>
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="nome-adis">Nome e Cognome</label>
                            <input type="text" id="nome-adis" placeholder="Nome dell'amministratore">
                        </div>
                        <div class="form-group">
                            <label for="telefono-adis">Telefono</label>
                            <input type="tel" id="telefono-adis">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="email-adis">Email</label>
                            <input type="email" id="email-adis">
                        </div>
                        <div class="form-group">
                            <label for="data-incarico-adis">Data incarico</label>
                            <input type="date" id="data-incarico-adis">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="rgn-adis">N. / RGN</label>
                            <input type="text" id="rgn-adis" placeholder="Numero del registro">
                        </div>
                    </div>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="incarico-assistenza" name="incarico-adis">
                            <label for="incarico-assistenza">Incarico di assistenza</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="incarico-rappresentanza" name="incarico-adis">
                            <label for="incarico-rappresentanza">Incarico di rappresentanza per gli atti</label>
                        </div>
                    </div>
                </div>

                <div class="sub-section">
                    <div class="sub-section-title">Tutore</div>
                    <div class="form-group">
                        <label>Tutore presente</label>
                        <div class="radio-group">
                            <div class="radio-item">
                                <input type="radio" id="tutore-si" name="tutore" value="si">
                                <label for="tutore-si">Si</label>
                            </div>
                            <div class="radio-item">
                                <input type="radio" id="tutore-no" name="tutore" value="no">
                                <label for="tutore-no">No</label>
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="nome-tutore">Nome e Cognome</label>
                            <input type="text" id="nome-tutore">
                        </div>
                        <div class="form-group">
                            <label for="telefono-tutore">Telefono</label>
                            <input type="tel" id="telefono-tutore">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="email-tutore">Email</label>
                            <input type="email" id="email-tutore">
                        </div>
                        <div class="form-group">
                            <label for="data-tutore">Data incarico</label>
                            <input type="date" id="data-tutore">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="rgn-tutore">N. / RGN</label>
                        <input type="text" id="rgn-tutore">
                    </div>
                </div>

                <div class="sub-section">
                    <div class="sub-section-title">Curatore</div>
                    <div class="form-group">
                        <label>Curatore presente</label>
                        <div class="radio-group">
                            <div class="radio-item">
                                <input type="radio" id="curatore-si" name="curatore" value="si">
                                <label for="curatore-si">Si</label>
                            </div>
                            <div class="radio-item">
                                <input type="radio" id="curatore-no" name="curatore" value="no">
                                <label for="curatore-no">No</label>
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="nome-curatore">Nome e Cognome</label>
                            <input type="text" id="nome-curatore">
                        </div>
                        <div class="form-group">
                            <label for="telefono-curatore">Telefono</label>
                            <input type="tel" id="telefono-curatore">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="email-curatore">Email</label>
                            <input type="email" id="email-curatore">
                        </div>
                        <div class="form-group">
                            <label for="data-curatore">Data incarico</label>
                            <input type="date" id="data-curatore">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="rgn-curatore">N. / RGN</label>
                        <input type="text" id="rgn-curatore">
                    </div>
                </div>

                <div class="sub-section">
                    <div class="sub-section-title">Procura Attiva</div>
                    <div class="form-group">
                        <label>Procura attiva</label>
                        <div class="radio-group">
                            <div class="radio-item">
                                <input type="radio" id="procura-si" name="procura-attiva" value="si">
                                <label for="procura-si">Si</label>
                            </div>
                            <div class="radio-item">
                                <input type="radio" id="procura-no" name="procura-attiva" value="no">
                                <label for="procura-no">No</label>
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="spec-procura">Specificare</label>
                            <textarea id="spec-procura" placeholder="Descrizione della procura"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="nome-procurante">Nome e Cognome Procurante</label>
                            <input type="text" id="nome-procurante">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="telefono-procurante">Telefono</label>
                            <input type="tel" id="telefono-procurante">
                        </div>
                        <div class="form-group">
                            <label for="email-procurante">Email</label>
                            <input type="email" id="email-procurante">
                        </div>
                    </div>
                </div>

                <div class="sub-section">
                    <div class="sub-section-title">Necessit√† di Protezione Giuridica</div>
                    <div class="form-group">
                        <label>Necessit√† di richiesta protezione giuridica</label>
                        <div class="radio-group">
                            <div class="radio-item">
                                <input type="radio" id="protezione-si" name="necessita-protezione" value="si">
                                <label for="protezione-si">Si</label>
                            </div>
                            <div class="radio-item">
                                <input type="radio" id="protezione-no" name="necessita-protezione" value="no">
                                <label for="protezione-no">No</label>
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="stato-protezione">Stato</label>
                            <select id="stato-protezione">
                                <option value="">-- Selezionare --</option>
                                <option value="in-corso">In corso</option>
                                <option value="predisporre">Predisporre documentazione</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="data-istanza">Data istanza</label>
                            <input type="date" id="data-istanza">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="tribunale">Tribunale</label>
                        <input type="text" id="tribunale" placeholder="Nome del tribunale">
                    </div>
                </div>

                <div class="sub-section">
                    <div class="sub-section-title">Misure di Sicurezza Attive</div>
                    <div class="form-group">
                        <label>Misure di sicurezza attive</label>
                        <div class="radio-group">
                            <div class="radio-item">
                                <input type="radio" id="misure-si" name="misure-sicurezza" value="si">
                                <label for="misure-si">Si</label>
                            </div>
                            <div class="radio-item">
                                <input type="radio" id="misure-no" name="misure-sicurezza" value="no">
                                <label for="misure-no">No</label>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="spec-misure">Specificare misure di sicurezza</label>
                        <textarea id="spec-misure" placeholder="Descrizione delle misure"></textarea>
                    </div>
                </div>

                <div class="button-group">
                    <button class="btn-secondary" onclick="pulisciSezione('giuridica')">Pulisci</button>
                    <button class="btn-primary" onclick="salvaSezione('giuridica')">Salva Sezione</button>
                </div>
            </div>
        </div>

        <div class="button-group" style="padding: 20px 30px; border-top: 1px solid #ddd; background: #f8f9fa;">
            <button class="btn-success" onclick="salvaCartella()">üíæ Salva Cartella Completa</button>
            <button class="btn-primary" onclick="esportaJSON()">üì• Esporta JSON</button>
            <button class="btn-danger" onclick="pulisciTutto()">üóëÔ∏è Pulisci Tutto</button>
        </div>

        <footer>
            <p><span class="sync-indicator"></span>‚úì Sincronizzazione pronta</p>
            <div class="footer-links">
                <a href="#" onclick="scaricaCartellaJSON()">Scarica JSON</a>
                <span>‚Ä¢</span>
                <a href="#" onclick="stampaCartella()">Stampa</a>
                <span>‚Ä¢</span>
                <a href="#" onclick="alert('Versione 1.0 - Dicembre 2025')">Informazioni</a>
            </div>
        </footer>
    </div>

    <script>
        // Gestione delle schede
        document.querySelectorAll('.nav-tab').forEach(tab => {
            tab.addEventListener('click', function() {
                const tabName = this.getAttribute('data-tab');
                mostraTab(tabName);
            });
        });

        function mostraTab(tabName) {
            // Nascondi tutte le schede
            document.querySelectorAll('.tab-pane').forEach(pane => {
                pane.classList.remove('active');
            });

            // Rimuovi stato attivo da tutti i bottoni
            document.querySelectorAll('.nav-tab').forEach(btn => {
                btn.classList.remove('active');
            });

            // Mostra la scheda selezionata
            document.getElementById(tabName).classList.add('active');

            // Attiva il bottone
            document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');

            // Scroll verso l'alto
            window.scrollTo(0, 0);
        }

        // Funzioni di salvataggio e pulizia
        function salvaSezione(sezione) {
            const dati = raccogliDatiSezione(sezione);
            const json = JSON.stringify(dati, null, 2);
            localStorage.setItem(`csi_${sezione}`, json);
            mostraAlert(`Sezione "${sezione}" salvata con successo!`, 'success');
        }

        function raccogliDatiSezione(sezione) {
            const dati = {};
            const inputs = document.getElementById(sezione).querySelectorAll('input, select, textarea');
            inputs.forEach(input => {
                if (input.type === 'checkbox' || input.type === 'radio') {
                    dati[input.id] = input.checked;
                } else {
                    dati[input.id] = input.value;
                }
            });
            return dati;
        }

        function pulisciSezione(sezione) {
            if (confirm(`Sei sicuro di voler pulire la sezione "${sezione}"?`)) {
                const inputs = document.getElementById(sezione).querySelectorAll('input, select, textarea');
                inputs.forEach(input => {
                    if (input.type === 'checkbox' || input.type === 'radio') {
                        input.checked = false;
                    } else {
                        input.value = '';
                    }
                });
                mostraAlert(`Sezione "${sezione}" pulita!`, 'success');
            }
        }

        function salvaCartella() {
            const cartella = {};
            ['anagrafica', 'interventi', 'autosufficienza', 'abitativa', 'economica', 'familiare', 'giuridica'].forEach(sezione => {
                cartella[sezione] = raccogliDatiSezione(sezione);
            });
            localStorage.setItem('csi_completa', JSON.stringify(cartella, null, 2));
            mostraAlert('Cartella Completa salvata con successo!', 'success');
        }

        function esportaJSON() {
            const cartella = {};
            ['anagrafica', 'interventi', 'autosufficienza', 'abitativa', 'economica', 'familiare', 'giuridica'].forEach(sezione => {
                cartella[sezione] = raccogliDatiSezione(sezione);
            });
            
            const dataStr = JSON.stringify(cartella, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `CSI_${new Date().getTime()}.json`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            mostraAlert('Cartella esportata in JSON!', 'success');
        }

        function scaricaCartellaJSON() {
            const cartella = localStorage.getItem('csi_completa');
            if (!cartella) {
                mostraAlert('Nessuna cartella salvata. Salva prima una cartella completa.', 'error');
                return;
            }
            
            const dataBlob = new Blob([cartella], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `CSI_Cartella_${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        function pulisciTutto() {
            if (confirm('ATTENZIONE: Questa azione eliminer√† TUTTI i dati salvati. Sei sicuro?')) {
                localStorage.clear();
                location.reload();
            }
        }

        function stampaCartella() {
            window.print();
        }

        function mostraAlert(messaggio, tipo) {
            const alert = document.createElement('div');
            alert.className = `alert alert-${tipo}`;
            alert.textContent = messaggio;
            alert.style.position = 'fixed';
            alert.style.top = '20px';
            alert.style.right = '20px';
            alert.style.zIndex = '9999';
            alert.style.maxWidth = '400px';
            document.body.appendChild(alert);
            
            setTimeout(() => {
                alert.remove();
            }, 4000);
        }

        // Validazione campi obbligatori
        function validaAnagraficaObbligatoria() {
            const campiObbligatori = [
                'nome', 'luogo-nascita', 'data-nascita', 'stato-civile',
                'cittadinanza', 'codice-fiscale'
            ];
            
            for (let campo of campiObbligatori) {
                const elemento = document.getElementById(campo);
                if (!elemento || !elemento.value) {
                    mostraAlert(`Il campo "${campo}" √® obbligatorio!`, 'error');
                    return false;
                }
            }
            return true;
        }

        // Caricamento dati al cambio di tab
        function caricaDatiSezione(sezione) {
            const dati = localStorage.getItem(`csi_${sezione}`);
            if (dati) {
                const parsed = JSON.parse(dati);
                Object.keys(parsed).forEach(key => {
                    const elemento = document.getElementById(key);
                    if (elemento) {
                        if (elemento.type === 'checkbox' || elemento.type === 'radio') {
                            elemento.checked = parsed[key];
                        } else {
                            elemento.value = parsed[key];
                        }
                    }
                });
            }
        }

        // Carica dati quando si cambia tab
        document.querySelectorAll('.nav-tab').forEach(tab => {
            tab.addEventListener('click', function() {
                const sezione = this.getAttribute('data-tab');
                setTimeout(() => caricaDatiSezione(sezione), 100);
            });
        });

        // Carica dati della prima sezione al caricamento
        window.addEventListener('load', function() {
            caricaDatiSezione('anagrafica');
        });
    </script>
</body>
</html>